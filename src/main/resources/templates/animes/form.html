<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${anime.id == null} ? 'Cadastrar anime' : 'Editar anime'"
           th:attr="data-i18n-document-title=${anime.id == null} ? 'form.meta.title.new' : 'form.meta.title.edit'"></title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
<header class="page-header">
    <div class="container header-layout">
        <div class="header-text">
            <h1 th:text="${anime.id == null} ? 'Cadastrar anime' : 'Editar anime'"
                th:attr="data-i18n=${anime.id == null} ? 'form.header.title.new' : 'form.header.title.edit'"></h1>
            <p data-i18n="form.header.description">Preencha os dados abaixo e mantenha sua lista sempre atualizada.</p>
        </div>
        <div class="header-controls">
            <div class="language-switcher" role="group" data-i18n-aria-label="language.switcher.label" aria-label="SeleÃ§Ã£o de idioma">
                <button type="button" class="language-button" data-language="pt" aria-pressed="true">
                    <span class="language-flag" aria-hidden="true">
                        <img class="language-icon" th:src="@{/img/flags/flag-pt.svg}" alt="">
                    </span>
                    <span class="language-label" aria-hidden="true">BR</span>
                    <span class="sr-only" data-i18n="language.portuguese">PortuguÃªs</span>
                </button>
                <button type="button" class="language-button" data-language="en">
                    <span class="language-flag" aria-hidden="true">
                        <img class="language-icon" th:src="@{/img/flags/flag-en.svg}" alt="">
                    </span>
                    <span class="language-label" aria-hidden="true">EN</span>
                    <span class="sr-only" data-i18n="language.english">InglÃªs</span>
                </button>
                <button type="button" class="language-button" data-language="es">
                    <span class="language-flag" aria-hidden="true">
                        <img class="language-icon" th:src="@{/img/flags/flag-es.svg}" alt="">
                    </span>
                    <span class="language-label" aria-hidden="true">ES</span>
                    <span class="sr-only" data-i18n="language.spanish">Espanhol</span>
                </button>
                <button type="button" class="language-button" data-language="jp">
                    <span class="language-flag" aria-hidden="true">
                        <img class="language-icon" th:src="@{/img/flags/flag-jp.svg}" alt="">
                    </span>
                    <span class="language-label" aria-hidden="true">JP</span>
                    <span class="sr-only" data-i18n="language.japanese">JaponÃªs</span>
                </button>
            </div>
            <button id="theme-toggle" class="theme-toggle" type="button" aria-pressed="false" data-i18n-title="theme.toggle.title" title="Alternar tema">
                <span class="theme-toggle-icon" aria-hidden="true">ðŸŒ™</span>
                <span class="theme-toggle-text"
                      data-i18n="theme.toggle.dark"
                      data-label-dark="Modo escuro"
                      data-label-dark-key="theme.toggle.dark"
                      data-label-light="Modo claro"
                      data-label-light-key="theme.toggle.light">Modo escuro</span>
            </button>
        </div>
    </div>
</header>
<main class="container">
    <section class="card">
        <form class="anime-form" th:action="${anime.id} != null ? @{/animes/{id}/update(id=${anime.id})} : @{/animes}" th:object="${anime}" method="post">
            <input type="hidden" th:field="*{id}">
            <div class="form-group" th:classappend="${#fields.hasErrors('titulo')} ? ' has-error' : ''">
                <label for="titulo" data-i18n="form.field.title">TÃ­tulo</label>
                <input id="titulo" type="text" th:field="*{titulo}" placeholder="Ex: Fullmetal Alchemist" data-i18n-placeholder="form.placeholder.title" required th:classappend="${#fields.hasErrors('titulo')} ? ' is-invalid' : ''">
                <p class="form-error" th:if="${#fields.hasErrors('titulo')}" th:errors="*{titulo}"></p>
            </div>
            <div class="form-group" th:classappend="${#fields.hasErrors('categoria')} ? ' has-error' : ''">
                <label for="categoria" data-i18n="form.field.category">Categoria</label>
                <select id="categoria" th:field="*{categoria}" th:classappend="${#fields.hasErrors('categoria')} ? ' is-invalid' : ''">
                    <option value="" th:if="${anime.categoria == null}" disabled selected data-i18n="form.select.placeholder">Selecione</option>
                    <option th:each="categoria : ${categorias}" th:value="${categoria}" th:text="${categoria}"></option>
                </select>
                <p class="form-error" th:if="${#fields.hasErrors('categoria')}" th:errors="*{categoria}"></p>
            </div>
            <div class="form-group" th:classappend="${#fields.hasErrors('anoLancamento')} ? ' has-error' : ''">
                <label for="anoLancamento">
                    <span data-i18n="form.field.releaseYear">Ano de lanÃ§amento</span>
                    <span id="releaseYearHint" class="optional-hint" data-i18n="form.field.optional">(Opcional)</span>
                </label>
                <input id="anoLancamento" type="date" th:field="*{anoLancamento}" aria-describedby="releaseYearHint" th:classappend="${#fields.hasErrors('anoLancamento')} ? ' is-invalid' : ''">
                <p class="form-error" th:if="${#fields.hasErrors('anoLancamento')}" th:errors="*{anoLancamento}"></p>
            </div>
            <div class="form-group" th:classappend="${#fields.hasErrors('numEpisodios')} ? ' has-error' : ''">
                <label for="numEpisodios" data-i18n="form.field.episodes">NÃºmero de episÃ³dios</label>
                <input id="numEpisodios" type="number" min="1" th:field="*{numEpisodios}" placeholder="Ex: 24" data-i18n-placeholder="form.placeholder.episodes" th:classappend="${#fields.hasErrors('numEpisodios')} ? ' is-invalid' : ''">
                <p class="form-error" th:if="${#fields.hasErrors('numEpisodios')}" th:errors="*{numEpisodios}"></p>
            </div>
            <div class="form-actions">
                <button type="submit" class="button" data-i18n="form.actions.save">Salvar</button>
                <a class="button secondary" th:href="@{/animes}" data-i18n="form.actions.cancel">Cancelar</a>
            </div>
        </form>
    </section>
</main>
<footer class="page-footer">
    <div class="container">
        <p data-i18n="layout.footer">AnimeAI &mdash; Powered by Spring Boot e Thymeleaf.</p>
    </div>
</footer>
<script th:src="@{/js/i18n.js}"></script>
<script th:src="@{/js/theme.js}"></script>
</body>
</html>
